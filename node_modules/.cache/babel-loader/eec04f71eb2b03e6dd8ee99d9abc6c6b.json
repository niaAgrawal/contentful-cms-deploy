{"ast":null,"code":"import copy from 'fast-copy';\nimport qs from 'qs';\nimport isString from 'lodash.isstring';\nimport pThrottle from 'p-throttle';\nimport isPlainObject from 'lodash.isplainobject';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      return groups[name] = result[g[name]], groups;\n    }, Object.create(null));\n  }\n\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    return result && (result.groups = buildGroups(result, this)), result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        return \"$\" + groups[name];\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction isNode() {\n  /**\n   * Polyfills of 'process' might set process.browser === true\n   *\n   * See:\n   * https://github.com/webpack/node-libs-browser/blob/master/mock/process.js#L8\n   * https://github.com/defunctzombie/node-process/blob/master/browser.js#L156\n   **/\n  return typeof process !== 'undefined' && !process.browser;\n}\n\nfunction isReactNative() {\n  return typeof window !== 'undefined' && 'navigator' in window && 'product' in window.navigator && window.navigator.product === 'ReactNative';\n}\n\nfunction getNodeVersion() {\n  return process.versions && process.versions.node ? \"v\".concat(process.versions.node) : process.version;\n}\n\nfunction getWindow() {\n  return window;\n}\n\nfunction noop() {\n  return undefined;\n}\n\nvar PERCENTAGE_REGEX = /*#__PURE__*/_wrapRegExp(/(\\d+)(%)/, {\n  value: 1\n});\n\nfunction calculateLimit(type) {\n  var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 7;\n  var limit = max;\n\n  if (PERCENTAGE_REGEX.test(type)) {\n    var _type$match;\n\n    var groups = (_type$match = type.match(PERCENTAGE_REGEX)) === null || _type$match === void 0 ? void 0 : _type$match.groups;\n\n    if (groups && groups.value) {\n      var percentage = parseInt(groups.value) / 100;\n      limit = Math.round(max * percentage);\n    }\n  }\n\n  return Math.min(30, Math.max(1, limit));\n}\n\nfunction createThrottle(limit, logger) {\n  logger('info', \"Throttle request to \".concat(limit, \"/s\"));\n  return pThrottle({\n    limit: limit,\n    interval: 1000,\n    strict: false\n  });\n}\n\nvar rateLimitThrottle = function (axiosInstance) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'auto';\n  var _axiosInstance$defaul = axiosInstance.defaults.logHandler,\n      logHandler = _axiosInstance$defaul === void 0 ? noop : _axiosInstance$defaul;\n  var limit = isString(type) ? calculateLimit(type) : calculateLimit('auto', type);\n  var throttle = createThrottle(limit, logHandler);\n  var isCalculated = false;\n  var requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n    return throttle(function () {\n      return config;\n    })();\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  var responseInterceptorId = axiosInstance.interceptors.response.use(function (response) {\n    if (!isCalculated && isString(type) && (type === 'auto' || PERCENTAGE_REGEX.test(type)) && response.headers && response.headers['x-contentful-ratelimit-second-limit']) {\n      var rawLimit = parseInt(response.headers['x-contentful-ratelimit-second-limit']);\n      var nextLimit = calculateLimit(type, rawLimit);\n\n      if (nextLimit !== limit) {\n        if (requestInterceptorId) {\n          axiosInstance.interceptors.request.eject(requestInterceptorId);\n        }\n\n        limit = nextLimit;\n        throttle = createThrottle(nextLimit, logHandler);\n        requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n          return throttle(function () {\n            return config;\n          })();\n        }, function (error) {\n          return Promise.reject(error);\n        });\n      }\n\n      isCalculated = true;\n    }\n\n    return response;\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  return function () {\n    axiosInstance.interceptors.request.eject(requestInterceptorId);\n    axiosInstance.interceptors.response.eject(responseInterceptorId);\n  };\n};\n\nvar delay = function delay(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n};\n\nvar defaultWait = function defaultWait(attempts) {\n  return Math.pow(Math.SQRT2, attempts);\n};\n\nfunction rateLimit(instance) {\n  var maxRetry = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  var _instance$defaults = instance.defaults,\n      _instance$defaults$re = _instance$defaults.responseLogger,\n      responseLogger = _instance$defaults$re === void 0 ? noop : _instance$defaults$re,\n      _instance$defaults$re2 = _instance$defaults.requestLogger,\n      requestLogger = _instance$defaults$re2 === void 0 ? noop : _instance$defaults$re2;\n  instance.interceptors.request.use(function (config) {\n    requestLogger(config);\n    return config;\n  }, function (error) {\n    requestLogger(error);\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(function (response) {\n    // we don't need to do anything here\n    responseLogger(response);\n    return response;\n  }, function (error) {\n    var response = error.response;\n    var config = error.config;\n    responseLogger(error); // Do not retry if it is disabled or no request config exists (not an axios error)\n\n    if (!config || !instance.defaults.retryOnError) {\n      return Promise.reject(error);\n    } // Retried already for max attempts\n\n\n    var doneAttempts = config.attempts || 1;\n\n    if (doneAttempts > maxRetry) {\n      error.attempts = config.attempts;\n      return Promise.reject(error);\n    }\n\n    var retryErrorType = null;\n    var wait = defaultWait(doneAttempts); // Errors without response did not receive anything from the server\n\n    if (!response) {\n      retryErrorType = 'Connection';\n    } else if (response.status >= 500 && response.status < 600) {\n      // 5** errors are server related\n      retryErrorType = \"Server \".concat(response.status);\n    } else if (response.status === 429) {\n      // 429 errors are exceeded rate limit exceptions\n      retryErrorType = 'Rate limit'; // all headers are lowercased by axios https://github.com/mzabriskie/axios/issues/413\n\n      if (response.headers && error.response.headers['x-contentful-ratelimit-reset']) {\n        wait = response.headers['x-contentful-ratelimit-reset'];\n      }\n    }\n\n    if (retryErrorType) {\n      // convert to ms and add jitter\n      wait = Math.floor(wait * 1000 + Math.random() * 200 + 500);\n      instance.defaults.logHandler('warning', \"\".concat(retryErrorType, \" error occurred. Waiting for \").concat(wait, \" ms before retrying...\")); // increase attempts counter\n\n      config.attempts = doneAttempts + 1;\n      /* Somehow between the interceptor and retrying the request the httpAgent/httpsAgent gets transformed from an Agent-like object\n       to a regular object, causing failures on retries after rate limits. Removing these properties here fixes the error, but retry\n       requests still use the original http/httpsAgent property */\n\n      delete config.httpAgent;\n      delete config.httpsAgent;\n      return delay(wait).then(function () {\n        return instance(config);\n      });\n    }\n\n    return Promise.reject(error);\n  });\n}\n\nfunction asyncToken(instance, getToken) {\n  instance.interceptors.request.use(function (config) {\n    return getToken().then(function (accessToken) {\n      config.headers = _objectSpread2(_objectSpread2({}, config.headers), {}, {\n        Authorization: \"Bearer \".concat(accessToken)\n      });\n      return config;\n    });\n  });\n} // Also enforces toplevel domain specified, no spaces and no protocol\n\n\nvar HOST_REGEX = /^(?!\\w+:\\/\\/)([^\\s:]+\\.?[^\\s:]+)(?::(\\d+))?(?!:)$/;\n/**\n * Create pre configured axios instance\n * @private\n * @param {AxiosStatic} axios - Axios library\n * @param {CreateHttpClientParams} options - Initialization parameters for the HTTP client\n * @return {ContentfulAxiosInstance} Initialized axios instance\n */\n\nfunction createHttpClient(axios, options) {\n  var defaultConfig = {\n    insecure: false,\n    retryOnError: true,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logHandler: function logHandler(level, data) {\n      if (level === 'error' && data) {\n        var title = [data.name, data.message].filter(function (a) {\n          return a;\n        }).join(' - ');\n        console.error(\"[error] \".concat(title));\n        console.error(data);\n        return;\n      }\n\n      console.log(\"[\".concat(level, \"] \").concat(data));\n    },\n    // Passed to axios\n    headers: {},\n    httpAgent: false,\n    httpsAgent: false,\n    timeout: 30000,\n    throttle: 0,\n    proxy: false,\n    basePath: '',\n    adapter: undefined,\n    maxContentLength: 1073741824,\n    // 1GB\n    maxBodyLength: 1073741824 // 1GB\n\n  };\n\n  var config = _objectSpread2(_objectSpread2({}, defaultConfig), options);\n\n  if (!config.accessToken) {\n    var missingAccessTokenError = new TypeError('Expected parameter accessToken');\n    config.logHandler('error', missingAccessTokenError);\n    throw missingAccessTokenError;\n  } // Construct axios baseURL option\n\n\n  var protocol = config.insecure ? 'http' : 'https';\n  var space = config.space ? \"\".concat(config.space, \"/\") : '';\n  var hostname = config.defaultHostname;\n  var port = config.insecure ? 80 : 443;\n\n  if (config.host && HOST_REGEX.test(config.host)) {\n    var parsed = config.host.split(':');\n\n    if (parsed.length === 2) {\n      var _parsed = _slicedToArray(parsed, 2);\n\n      hostname = _parsed[0];\n      port = _parsed[1];\n    } else {\n      hostname = parsed[0];\n    }\n  } // Ensure that basePath does start but not end with a slash\n\n\n  if (config.basePath) {\n    config.basePath = \"/\".concat(config.basePath.split('/').filter(Boolean).join('/'));\n  }\n\n  var baseURL = options.baseURL || \"\".concat(protocol, \"://\").concat(hostname, \":\").concat(port).concat(config.basePath, \"/spaces/\").concat(space);\n\n  if (!config.headers.Authorization && typeof config.accessToken !== 'function') {\n    config.headers.Authorization = 'Bearer ' + config.accessToken;\n  } // Set these headers only for node because browsers don't like it when you\n  // override user-agent or accept-encoding.\n  // The SDKs should set their own X-Contentful-User-Agent.\n\n\n  if (isNode()) {\n    config.headers['user-agent'] = 'node.js/' + getNodeVersion();\n    config.headers['Accept-Encoding'] = 'gzip';\n  }\n\n  var axiosOptions = {\n    // Axios\n    baseURL: baseURL,\n    headers: config.headers,\n    httpAgent: config.httpAgent,\n    httpsAgent: config.httpsAgent,\n    paramsSerializer: qs.stringify,\n    proxy: config.proxy,\n    timeout: config.timeout,\n    adapter: config.adapter,\n    maxContentLength: config.maxContentLength,\n    maxBodyLength: config.maxBodyLength,\n    // Contentful\n    logHandler: config.logHandler,\n    responseLogger: config.responseLogger,\n    requestLogger: config.requestLogger,\n    retryOnError: config.retryOnError\n  };\n  var instance = axios.create(axiosOptions);\n  instance.httpClientParams = options;\n  /**\n   * Creates a new axios instance with the same default base parameters as the\n   * current one, and with any overrides passed to the newParams object\n   * This is useful as the SDKs use dependency injection to get the axios library\n   * and the version of the library comes from different places depending\n   * on whether it's a browser build or a node.js build.\n   * @private\n   * @param {CreateHttpClientParams} httpClientParams - Initialization parameters for the HTTP client\n   * @return {ContentfulAxiosInstance} Initialized axios instance\n   */\n\n  instance.cloneWithNewParams = function (newParams) {\n    return createHttpClient(axios, _objectSpread2(_objectSpread2({}, copy(options)), newParams));\n  };\n  /**\n   * Apply interceptors.\n   * Please note that the order of interceptors is important\n   */\n\n\n  if (config.onBeforeRequest) {\n    instance.interceptors.request.use(config.onBeforeRequest);\n  }\n\n  if (typeof config.accessToken === 'function') {\n    asyncToken(instance, config.accessToken);\n  }\n\n  if (config.throttle) {\n    rateLimitThrottle(instance, config.throttle);\n  }\n\n  rateLimit(instance, config.retryLimit);\n\n  if (config.onError) {\n    instance.interceptors.response.use(function (response) {\n      return response;\n    }, config.onError);\n  }\n\n  return instance;\n}\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Creates request parameters configuration by parsing an existing query object\n * @private\n * @param {Object} query\n * @return {Object} Config object with `params` property, ready to be used in axios\n */\n\n\nfunction createRequestConfig(_ref) {\n  var query = _ref.query;\n  var config = {};\n  delete query.resolveLinks;\n  config.params = copy(query);\n  return config;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction enforceObjPath(obj, path) {\n  if (!(path in obj)) {\n    var err = new Error();\n    err.name = 'PropertyMissing';\n    err.message = \"Required property \".concat(path, \" missing from:\\n\\n\").concat(JSON.stringify(obj), \"\\n\\n\");\n    throw err;\n  }\n\n  return true;\n} // copied from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n\n\nfunction deepFreeze(object) {\n  var propNames = Object.getOwnPropertyNames(object);\n\n  var _iterator = _createForOfIteratorHelper(propNames),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var name = _step.value;\n      var value = object[name];\n\n      if (value && _typeof(value) === 'object') {\n        deepFreeze(value);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return Object.freeze(object);\n}\n\nfunction freezeSys(obj) {\n  deepFreeze(obj.sys || {});\n  return obj;\n}\n\nfunction getBrowserOS() {\n  var win = getWindow();\n\n  if (!win) {\n    return null;\n  }\n\n  var userAgent = win.navigator.userAgent; // TODO: platform is deprecated.\n\n  var platform = win.navigator.platform;\n  var macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  var windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  var iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    return 'macOS';\n  } else if (iosPlatforms.indexOf(platform) !== -1) {\n    return 'iOS';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    return 'Windows';\n  } else if (/Android/.test(userAgent)) {\n    return 'Android';\n  } else if (/Linux/.test(platform)) {\n    return 'Linux';\n  }\n\n  return null;\n}\n\nfunction getNodeOS() {\n  var platform = process.platform || 'linux';\n  var version = process.version || '0.0.0';\n  var platformMap = {\n    android: 'Android',\n    aix: 'Linux',\n    darwin: 'macOS',\n    freebsd: 'Linux',\n    linux: 'Linux',\n    openbsd: 'Linux',\n    sunos: 'Linux',\n    win32: 'Windows'\n  };\n\n  if (platform in platformMap) {\n    return \"\".concat(platformMap[platform] || 'Linux', \"/\").concat(version);\n  }\n\n  return null;\n}\n\nfunction getUserAgentHeader(sdk, application, integration, feature) {\n  var headerParts = [];\n\n  if (application) {\n    headerParts.push(\"app \".concat(application));\n  }\n\n  if (integration) {\n    headerParts.push(\"integration \".concat(integration));\n  }\n\n  if (feature) {\n    headerParts.push('feature ' + feature);\n  }\n\n  headerParts.push(\"sdk \".concat(sdk));\n  var platform = null;\n\n  try {\n    if (isReactNative()) {\n      platform = getBrowserOS();\n      headerParts.push('platform ReactNative');\n    } else if (isNode()) {\n      platform = getNodeOS();\n      headerParts.push(\"platform node.js/\".concat(getNodeVersion()));\n    } else {\n      platform = getBrowserOS();\n      headerParts.push('platform browser');\n    }\n  } catch (e) {\n    platform = null;\n  }\n\n  if (platform) {\n    headerParts.push(\"os \".concat(platform));\n  }\n\n  return \"\".concat(headerParts.filter(function (item) {\n    return item !== '';\n  }).join('; '), \";\");\n}\n/**\n * Mixes in a method to return just a plain object with no additional methods\n * @private\n * @param data - Any plain JSON response returned from the API\n * @return Enhanced object with toPlainObject method\n */\n\n\nfunction toPlainObject(data) {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error\n  return Object.defineProperty(data, 'toPlainObject', {\n    enumerable: false,\n    configurable: false,\n    writable: false,\n    value: function value() {\n      return copy(this);\n    }\n  });\n}\n/**\n * Handles errors received from the server. Parses the error into a more useful\n * format, places it in an exception and throws it.\n * See https://www.contentful.com/developers/docs/references/errors/\n * for more details on the data received on the errorResponse.data property\n * and the expected error codes.\n * @private\n */\n\n\nfunction errorHandler(errorResponse) {\n  var config = errorResponse.config,\n      response = errorResponse.response;\n  var errorName; // Obscure the Management token\n\n  if (config && config.headers && config.headers['Authorization']) {\n    var token = \"...\".concat(config.headers['Authorization'].toString().substr(-5));\n    config.headers['Authorization'] = \"Bearer \".concat(token);\n  }\n\n  if (!isPlainObject(response) || !isPlainObject(config)) {\n    throw errorResponse;\n  }\n\n  var data = response === null || response === void 0 ? void 0 : response.data;\n  var errorData = {\n    status: response === null || response === void 0 ? void 0 : response.status,\n    statusText: response === null || response === void 0 ? void 0 : response.statusText,\n    message: '',\n    details: {}\n  };\n\n  if (isPlainObject(config)) {\n    errorData.request = {\n      url: config.url,\n      headers: config.headers,\n      method: config.method,\n      payloadData: config.data\n    };\n  }\n\n  if (data && isPlainObject(data)) {\n    if ('requestId' in data) {\n      errorData.requestId = data.requestId || 'UNKNOWN';\n    }\n\n    if ('message' in data) {\n      errorData.message = data.message || '';\n    }\n\n    if ('details' in data) {\n      errorData.details = data.details || {};\n    }\n\n    if ('sys' in data) {\n      if ('id' in data.sys) {\n        errorName = data.sys.id;\n      }\n    }\n  }\n\n  var error = new Error();\n  error.name = errorName && errorName !== 'Unknown' ? errorName : \"\".concat(response === null || response === void 0 ? void 0 : response.status, \" \").concat(response === null || response === void 0 ? void 0 : response.statusText);\n\n  try {\n    error.message = JSON.stringify(errorData, null, '  ');\n  } catch (_unused) {\n    var _errorData$message;\n\n    error.message = (_errorData$message = errorData === null || errorData === void 0 ? void 0 : errorData.message) !== null && _errorData$message !== void 0 ? _errorData$message : '';\n  }\n\n  throw error;\n}\n\nexport { createHttpClient, createRequestConfig, enforceObjPath, errorHandler, freezeSys, getUserAgentHeader, toPlainObject };","map":{"version":3,"sources":["/Users/nagrawal/LC/blog-contentful-cms/blog-demo/node_modules/contentful-sdk-core/dist/index.es-modules.js"],"names":["copy","qs","isString","pThrottle","isPlainObject","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","Symbol","iterator","constructor","prototype","_wrapRegExp","re","groups","BabelRegExp","_super","RegExp","_groups","WeakMap","flags","_this","set","get","_setPrototypeOf","buildGroups","result","g","reduce","name","create","_inherits","exec","str","call","replace","substitution","_","args","slice","value","configurable","writable","subClass","superClass","TypeError","o","p","setPrototypeOf","__proto__","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","Array","isArray","_i","_arr","_n","_d","_s","_e","next","done","err","minLen","_arrayLikeToArray","n","toString","from","test","len","arr2","_createForOfIteratorHelper","allowArrayLike","it","F","s","e","f","normalCompletion","didErr","step","return","isNode","process","browser","isReactNative","window","navigator","product","getNodeVersion","versions","node","concat","version","getWindow","noop","undefined","PERCENTAGE_REGEX","calculateLimit","type","max","limit","_type$match","match","percentage","parseInt","Math","round","min","createThrottle","logger","interval","strict","rateLimitThrottle","axiosInstance","_axiosInstance$defaul","defaults","logHandler","throttle","isCalculated","requestInterceptorId","interceptors","request","use","config","error","Promise","reject","responseInterceptorId","response","headers","rawLimit","nextLimit","eject","delay","ms","resolve","setTimeout","defaultWait","attempts","pow","SQRT2","rateLimit","instance","maxRetry","_instance$defaults","_instance$defaults$re","responseLogger","_instance$defaults$re2","requestLogger","retryOnError","doneAttempts","retryErrorType","wait","status","floor","random","httpAgent","httpsAgent","then","asyncToken","getToken","accessToken","Authorization","HOST_REGEX","createHttpClient","axios","options","defaultConfig","insecure","level","data","title","message","a","join","console","log","timeout","proxy","basePath","adapter","maxContentLength","maxBodyLength","missingAccessTokenError","protocol","space","hostname","defaultHostname","port","host","parsed","split","_parsed","Boolean","baseURL","axiosOptions","paramsSerializer","stringify","httpClientParams","cloneWithNewParams","newParams","onBeforeRequest","retryLimit","onError","createRequestConfig","_ref","query","resolveLinks","params","enforceObjPath","path","Error","JSON","deepFreeze","propNames","getOwnPropertyNames","_iterator","_step","freeze","freezeSys","sys","getBrowserOS","win","userAgent","platform","macosPlatforms","windowsPlatforms","iosPlatforms","indexOf","getNodeOS","platformMap","android","aix","darwin","freebsd","linux","openbsd","sunos","win32","getUserAgentHeader","sdk","application","integration","feature","headerParts","item","toPlainObject","errorHandler","errorResponse","errorName","token","substr","errorData","statusText","details","url","method","payloadData","requestId","id","_unused","_errorData$message"],"mappings":"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","sourcesContent":["import copy from 'fast-copy';\nimport qs from 'qs';\nimport isString from 'lodash.isstring';\nimport pThrottle from 'p-throttle';\nimport isPlainObject from 'lodash.isplainobject';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      return groups[name] = result[g[name]], groups;\n    }, Object.create(null));\n  }\n\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    return result && (result.groups = buildGroups(result, this)), result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        return \"$\" + groups[name];\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction isNode() {\n  /**\n   * Polyfills of 'process' might set process.browser === true\n   *\n   * See:\n   * https://github.com/webpack/node-libs-browser/blob/master/mock/process.js#L8\n   * https://github.com/defunctzombie/node-process/blob/master/browser.js#L156\n   **/\n  return typeof process !== 'undefined' && !process.browser;\n}\nfunction isReactNative() {\n  return typeof window !== 'undefined' && 'navigator' in window && 'product' in window.navigator && window.navigator.product === 'ReactNative';\n}\nfunction getNodeVersion() {\n  return process.versions && process.versions.node ? \"v\".concat(process.versions.node) : process.version;\n}\nfunction getWindow() {\n  return window;\n}\nfunction noop() {\n  return undefined;\n}\n\nvar PERCENTAGE_REGEX = /*#__PURE__*/_wrapRegExp(/(\\d+)(%)/, {\n  value: 1\n});\n\nfunction calculateLimit(type) {\n  var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 7;\n  var limit = max;\n\n  if (PERCENTAGE_REGEX.test(type)) {\n    var _type$match;\n\n    var groups = (_type$match = type.match(PERCENTAGE_REGEX)) === null || _type$match === void 0 ? void 0 : _type$match.groups;\n\n    if (groups && groups.value) {\n      var percentage = parseInt(groups.value) / 100;\n      limit = Math.round(max * percentage);\n    }\n  }\n\n  return Math.min(30, Math.max(1, limit));\n}\n\nfunction createThrottle(limit, logger) {\n  logger('info', \"Throttle request to \".concat(limit, \"/s\"));\n  return pThrottle({\n    limit: limit,\n    interval: 1000,\n    strict: false\n  });\n}\n\nvar rateLimitThrottle = (function (axiosInstance) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'auto';\n  var _axiosInstance$defaul = axiosInstance.defaults.logHandler,\n      logHandler = _axiosInstance$defaul === void 0 ? noop : _axiosInstance$defaul;\n  var limit = isString(type) ? calculateLimit(type) : calculateLimit('auto', type);\n  var throttle = createThrottle(limit, logHandler);\n  var isCalculated = false;\n  var requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n    return throttle(function () {\n      return config;\n    })();\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  var responseInterceptorId = axiosInstance.interceptors.response.use(function (response) {\n    if (!isCalculated && isString(type) && (type === 'auto' || PERCENTAGE_REGEX.test(type)) && response.headers && response.headers['x-contentful-ratelimit-second-limit']) {\n      var rawLimit = parseInt(response.headers['x-contentful-ratelimit-second-limit']);\n      var nextLimit = calculateLimit(type, rawLimit);\n\n      if (nextLimit !== limit) {\n        if (requestInterceptorId) {\n          axiosInstance.interceptors.request.eject(requestInterceptorId);\n        }\n\n        limit = nextLimit;\n        throttle = createThrottle(nextLimit, logHandler);\n        requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n          return throttle(function () {\n            return config;\n          })();\n        }, function (error) {\n          return Promise.reject(error);\n        });\n      }\n\n      isCalculated = true;\n    }\n\n    return response;\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  return function () {\n    axiosInstance.interceptors.request.eject(requestInterceptorId);\n    axiosInstance.interceptors.response.eject(responseInterceptorId);\n  };\n});\n\nvar delay = function delay(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n};\n\nvar defaultWait = function defaultWait(attempts) {\n  return Math.pow(Math.SQRT2, attempts);\n};\n\nfunction rateLimit(instance) {\n  var maxRetry = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  var _instance$defaults = instance.defaults,\n      _instance$defaults$re = _instance$defaults.responseLogger,\n      responseLogger = _instance$defaults$re === void 0 ? noop : _instance$defaults$re,\n      _instance$defaults$re2 = _instance$defaults.requestLogger,\n      requestLogger = _instance$defaults$re2 === void 0 ? noop : _instance$defaults$re2;\n  instance.interceptors.request.use(function (config) {\n    requestLogger(config);\n    return config;\n  }, function (error) {\n    requestLogger(error);\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(function (response) {\n    // we don't need to do anything here\n    responseLogger(response);\n    return response;\n  }, function (error) {\n    var response = error.response;\n    var config = error.config;\n    responseLogger(error); // Do not retry if it is disabled or no request config exists (not an axios error)\n\n    if (!config || !instance.defaults.retryOnError) {\n      return Promise.reject(error);\n    } // Retried already for max attempts\n\n\n    var doneAttempts = config.attempts || 1;\n\n    if (doneAttempts > maxRetry) {\n      error.attempts = config.attempts;\n      return Promise.reject(error);\n    }\n\n    var retryErrorType = null;\n    var wait = defaultWait(doneAttempts); // Errors without response did not receive anything from the server\n\n    if (!response) {\n      retryErrorType = 'Connection';\n    } else if (response.status >= 500 && response.status < 600) {\n      // 5** errors are server related\n      retryErrorType = \"Server \".concat(response.status);\n    } else if (response.status === 429) {\n      // 429 errors are exceeded rate limit exceptions\n      retryErrorType = 'Rate limit'; // all headers are lowercased by axios https://github.com/mzabriskie/axios/issues/413\n\n      if (response.headers && error.response.headers['x-contentful-ratelimit-reset']) {\n        wait = response.headers['x-contentful-ratelimit-reset'];\n      }\n    }\n\n    if (retryErrorType) {\n      // convert to ms and add jitter\n      wait = Math.floor(wait * 1000 + Math.random() * 200 + 500);\n      instance.defaults.logHandler('warning', \"\".concat(retryErrorType, \" error occurred. Waiting for \").concat(wait, \" ms before retrying...\")); // increase attempts counter\n\n      config.attempts = doneAttempts + 1;\n      /* Somehow between the interceptor and retrying the request the httpAgent/httpsAgent gets transformed from an Agent-like object\n       to a regular object, causing failures on retries after rate limits. Removing these properties here fixes the error, but retry\n       requests still use the original http/httpsAgent property */\n\n      delete config.httpAgent;\n      delete config.httpsAgent;\n      return delay(wait).then(function () {\n        return instance(config);\n      });\n    }\n\n    return Promise.reject(error);\n  });\n}\n\nfunction asyncToken(instance, getToken) {\n  instance.interceptors.request.use(function (config) {\n    return getToken().then(function (accessToken) {\n      config.headers = _objectSpread2(_objectSpread2({}, config.headers), {}, {\n        Authorization: \"Bearer \".concat(accessToken)\n      });\n      return config;\n    });\n  });\n}\n\n// Also enforces toplevel domain specified, no spaces and no protocol\n\nvar HOST_REGEX = /^(?!\\w+:\\/\\/)([^\\s:]+\\.?[^\\s:]+)(?::(\\d+))?(?!:)$/;\n/**\n * Create pre configured axios instance\n * @private\n * @param {AxiosStatic} axios - Axios library\n * @param {CreateHttpClientParams} options - Initialization parameters for the HTTP client\n * @return {ContentfulAxiosInstance} Initialized axios instance\n */\n\nfunction createHttpClient(axios, options) {\n  var defaultConfig = {\n    insecure: false,\n    retryOnError: true,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logHandler: function logHandler(level, data) {\n      if (level === 'error' && data) {\n        var title = [data.name, data.message].filter(function (a) {\n          return a;\n        }).join(' - ');\n        console.error(\"[error] \".concat(title));\n        console.error(data);\n        return;\n      }\n\n      console.log(\"[\".concat(level, \"] \").concat(data));\n    },\n    // Passed to axios\n    headers: {},\n    httpAgent: false,\n    httpsAgent: false,\n    timeout: 30000,\n    throttle: 0,\n    proxy: false,\n    basePath: '',\n    adapter: undefined,\n    maxContentLength: 1073741824,\n    // 1GB\n    maxBodyLength: 1073741824 // 1GB\n\n  };\n\n  var config = _objectSpread2(_objectSpread2({}, defaultConfig), options);\n\n  if (!config.accessToken) {\n    var missingAccessTokenError = new TypeError('Expected parameter accessToken');\n    config.logHandler('error', missingAccessTokenError);\n    throw missingAccessTokenError;\n  } // Construct axios baseURL option\n\n\n  var protocol = config.insecure ? 'http' : 'https';\n  var space = config.space ? \"\".concat(config.space, \"/\") : '';\n  var hostname = config.defaultHostname;\n  var port = config.insecure ? 80 : 443;\n\n  if (config.host && HOST_REGEX.test(config.host)) {\n    var parsed = config.host.split(':');\n\n    if (parsed.length === 2) {\n\n      var _parsed = _slicedToArray(parsed, 2);\n\n      hostname = _parsed[0];\n      port = _parsed[1];\n    } else {\n      hostname = parsed[0];\n    }\n  } // Ensure that basePath does start but not end with a slash\n\n\n  if (config.basePath) {\n    config.basePath = \"/\".concat(config.basePath.split('/').filter(Boolean).join('/'));\n  }\n\n  var baseURL = options.baseURL || \"\".concat(protocol, \"://\").concat(hostname, \":\").concat(port).concat(config.basePath, \"/spaces/\").concat(space);\n\n  if (!config.headers.Authorization && typeof config.accessToken !== 'function') {\n    config.headers.Authorization = 'Bearer ' + config.accessToken;\n  } // Set these headers only for node because browsers don't like it when you\n  // override user-agent or accept-encoding.\n  // The SDKs should set their own X-Contentful-User-Agent.\n\n\n  if (isNode()) {\n    config.headers['user-agent'] = 'node.js/' + getNodeVersion();\n    config.headers['Accept-Encoding'] = 'gzip';\n  }\n\n  var axiosOptions = {\n    // Axios\n    baseURL: baseURL,\n    headers: config.headers,\n    httpAgent: config.httpAgent,\n    httpsAgent: config.httpsAgent,\n    paramsSerializer: qs.stringify,\n    proxy: config.proxy,\n    timeout: config.timeout,\n    adapter: config.adapter,\n    maxContentLength: config.maxContentLength,\n    maxBodyLength: config.maxBodyLength,\n    // Contentful\n    logHandler: config.logHandler,\n    responseLogger: config.responseLogger,\n    requestLogger: config.requestLogger,\n    retryOnError: config.retryOnError\n  };\n  var instance = axios.create(axiosOptions);\n  instance.httpClientParams = options;\n  /**\n   * Creates a new axios instance with the same default base parameters as the\n   * current one, and with any overrides passed to the newParams object\n   * This is useful as the SDKs use dependency injection to get the axios library\n   * and the version of the library comes from different places depending\n   * on whether it's a browser build or a node.js build.\n   * @private\n   * @param {CreateHttpClientParams} httpClientParams - Initialization parameters for the HTTP client\n   * @return {ContentfulAxiosInstance} Initialized axios instance\n   */\n\n  instance.cloneWithNewParams = function (newParams) {\n    return createHttpClient(axios, _objectSpread2(_objectSpread2({}, copy(options)), newParams));\n  };\n  /**\n   * Apply interceptors.\n   * Please note that the order of interceptors is important\n   */\n\n\n  if (config.onBeforeRequest) {\n    instance.interceptors.request.use(config.onBeforeRequest);\n  }\n\n  if (typeof config.accessToken === 'function') {\n    asyncToken(instance, config.accessToken);\n  }\n\n  if (config.throttle) {\n    rateLimitThrottle(instance, config.throttle);\n  }\n\n  rateLimit(instance, config.retryLimit);\n\n  if (config.onError) {\n    instance.interceptors.response.use(function (response) {\n      return response;\n    }, config.onError);\n  }\n\n  return instance;\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Creates request parameters configuration by parsing an existing query object\n * @private\n * @param {Object} query\n * @return {Object} Config object with `params` property, ready to be used in axios\n */\nfunction createRequestConfig(_ref) {\n  var query = _ref.query;\n  var config = {};\n  delete query.resolveLinks;\n  config.params = copy(query);\n  return config;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction enforceObjPath(obj, path) {\n  if (!(path in obj)) {\n    var err = new Error();\n    err.name = 'PropertyMissing';\n    err.message = \"Required property \".concat(path, \" missing from:\\n\\n\").concat(JSON.stringify(obj), \"\\n\\n\");\n    throw err;\n  }\n\n  return true;\n}\n\n// copied from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\nfunction deepFreeze(object) {\n  var propNames = Object.getOwnPropertyNames(object);\n\n  var _iterator = _createForOfIteratorHelper(propNames),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var name = _step.value;\n      var value = object[name];\n\n      if (value && _typeof(value) === 'object') {\n        deepFreeze(value);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return Object.freeze(object);\n}\n\nfunction freezeSys(obj) {\n  deepFreeze(obj.sys || {});\n  return obj;\n}\n\nfunction getBrowserOS() {\n  var win = getWindow();\n\n  if (!win) {\n    return null;\n  }\n\n  var userAgent = win.navigator.userAgent; // TODO: platform is deprecated.\n\n  var platform = win.navigator.platform;\n  var macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  var windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  var iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    return 'macOS';\n  } else if (iosPlatforms.indexOf(platform) !== -1) {\n    return 'iOS';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    return 'Windows';\n  } else if (/Android/.test(userAgent)) {\n    return 'Android';\n  } else if (/Linux/.test(platform)) {\n    return 'Linux';\n  }\n\n  return null;\n}\n\nfunction getNodeOS() {\n  var platform = process.platform || 'linux';\n  var version = process.version || '0.0.0';\n  var platformMap = {\n    android: 'Android',\n    aix: 'Linux',\n    darwin: 'macOS',\n    freebsd: 'Linux',\n    linux: 'Linux',\n    openbsd: 'Linux',\n    sunos: 'Linux',\n    win32: 'Windows'\n  };\n\n  if (platform in platformMap) {\n    return \"\".concat(platformMap[platform] || 'Linux', \"/\").concat(version);\n  }\n\n  return null;\n}\n\nfunction getUserAgentHeader(sdk, application, integration, feature) {\n  var headerParts = [];\n\n  if (application) {\n    headerParts.push(\"app \".concat(application));\n  }\n\n  if (integration) {\n    headerParts.push(\"integration \".concat(integration));\n  }\n\n  if (feature) {\n    headerParts.push('feature ' + feature);\n  }\n\n  headerParts.push(\"sdk \".concat(sdk));\n  var platform = null;\n\n  try {\n    if (isReactNative()) {\n      platform = getBrowserOS();\n      headerParts.push('platform ReactNative');\n    } else if (isNode()) {\n      platform = getNodeOS();\n      headerParts.push(\"platform node.js/\".concat(getNodeVersion()));\n    } else {\n      platform = getBrowserOS();\n      headerParts.push('platform browser');\n    }\n  } catch (e) {\n    platform = null;\n  }\n\n  if (platform) {\n    headerParts.push(\"os \".concat(platform));\n  }\n\n  return \"\".concat(headerParts.filter(function (item) {\n    return item !== '';\n  }).join('; '), \";\");\n}\n\n/**\n * Mixes in a method to return just a plain object with no additional methods\n * @private\n * @param data - Any plain JSON response returned from the API\n * @return Enhanced object with toPlainObject method\n */\n\nfunction toPlainObject(data) {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error\n  return Object.defineProperty(data, 'toPlainObject', {\n    enumerable: false,\n    configurable: false,\n    writable: false,\n    value: function value() {\n      return copy(this);\n    }\n  });\n}\n\n/**\n * Handles errors received from the server. Parses the error into a more useful\n * format, places it in an exception and throws it.\n * See https://www.contentful.com/developers/docs/references/errors/\n * for more details on the data received on the errorResponse.data property\n * and the expected error codes.\n * @private\n */\nfunction errorHandler(errorResponse) {\n  var config = errorResponse.config,\n      response = errorResponse.response;\n  var errorName; // Obscure the Management token\n\n  if (config && config.headers && config.headers['Authorization']) {\n    var token = \"...\".concat(config.headers['Authorization'].toString().substr(-5));\n    config.headers['Authorization'] = \"Bearer \".concat(token);\n  }\n\n  if (!isPlainObject(response) || !isPlainObject(config)) {\n    throw errorResponse;\n  }\n\n  var data = response === null || response === void 0 ? void 0 : response.data;\n  var errorData = {\n    status: response === null || response === void 0 ? void 0 : response.status,\n    statusText: response === null || response === void 0 ? void 0 : response.statusText,\n    message: '',\n    details: {}\n  };\n\n  if (isPlainObject(config)) {\n    errorData.request = {\n      url: config.url,\n      headers: config.headers,\n      method: config.method,\n      payloadData: config.data\n    };\n  }\n\n  if (data && isPlainObject(data)) {\n    if ('requestId' in data) {\n      errorData.requestId = data.requestId || 'UNKNOWN';\n    }\n\n    if ('message' in data) {\n      errorData.message = data.message || '';\n    }\n\n    if ('details' in data) {\n      errorData.details = data.details || {};\n    }\n\n    if ('sys' in data) {\n      if ('id' in data.sys) {\n        errorName = data.sys.id;\n      }\n    }\n  }\n\n  var error = new Error();\n  error.name = errorName && errorName !== 'Unknown' ? errorName : \"\".concat(response === null || response === void 0 ? void 0 : response.status, \" \").concat(response === null || response === void 0 ? void 0 : response.statusText);\n\n  try {\n    error.message = JSON.stringify(errorData, null, '  ');\n  } catch (_unused) {\n    var _errorData$message;\n\n    error.message = (_errorData$message = errorData === null || errorData === void 0 ? void 0 : errorData.message) !== null && _errorData$message !== void 0 ? _errorData$message : '';\n  }\n\n  throw error;\n}\n\nexport { createHttpClient, createRequestConfig, enforceObjPath, errorHandler, freezeSys, getUserAgentHeader, toPlainObject };\n"]},"metadata":{},"sourceType":"module"}